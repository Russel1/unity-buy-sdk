language: objective-c
osx_image: xcode61
rvm:
  - 2.3.0
env:
  - PROJECT_ROOT=$PWD/unity-buy-sdk
  - UNITY_DOWNLOAD_DIR=$PROJECT_ROOT/unity
  - UNITY_PKG_LOCATION=$UNITY_DOWNLOAD_DIR/Unity.pkg
  - UNITY_PKG_URL=http://netstorage.unity3d.com/unity/b7e030c65c9b/MacEditorInstaller/Unity.pkg
  - IOS_PKG_LOCATION=$UNITY_DOWNLOAD_DIR/Unity-iOS.pkg
  - IOS_PKG_URL=http://netstorage.unity3d.com/unity/b7e030c65c9b/MacEditorTargetInstaller/UnitySetup-iOS-Support-for-Editor-5.4.2f2.pkg
  - UNITY_CIRCLE_XML_DIR=$CIRCLE_TEST_REPORTS/Unity
  - UNITY_CIRCLE_XML_OUT_PATH=$UNITY_CIRCLE_XML_DIR/junit.xml
cache:
  directories:
    - "./unity/"
install:
  - ./scripts/install_unity.sh
before_script:
  - ./scripts/build.sh
  - ./scripts/activate_license.sh
script:
  - ./scripts/test_unity.sh
